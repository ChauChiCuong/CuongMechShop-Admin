<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        .highlight-website { background-color: #f0fff4; }
        .highlight-admin { background-color: #ebf8ff; }
    </style>
</head>
<body class="bg-gray-100">
    <div class="container mx-auto p-4">
        <h1 class="text-2xl font-bold mb-4">Quản lý User</h1>
        
        <table class="min-w-full bg-white rounded-lg overflow-hidden">
            <thead class="bg-gray-800 text-white">
                <tr>
                    <th class="py-3">Ngày</th>
                    <th>Tài khoản</th>
                    <th>Email</th>
                    <th>Rank</th>
                    <th>Nguồn</th>
                </tr>
            </thead>
            <tbody id="userTable">
                <!-- Dữ liệu sẽ được thêm tại đây -->
            </tbody>
        </table>
    </div>

    <script>
    const API_URL = "https://script.google.com/macros/s/AKfycbyabtpDMvhFyCh3mtBkjmauasWmS-bjn09sthKUk8xUm8zWG_KItd9vRJn5f-0mkkhVUQ/exec";
    const SECRET_KEY = "Cuonguuu1u2u3u@";
    
    async function loadUsers() {
        try {
            const response = await fetch(`${API_URL}?action=getUsers&key=${SECRET_KEY}`);
            const result = await response.json();
            
            if (result.success) {
                renderUsers(result.data);
            }
        } catch (error) {
            console.error("Lỗi tải dữ liệu:", error);
        }
    }
    
    function renderUsers(users) {
        const table = document.getElementById('userTable');
        table.innerHTML = users.map(user => `
            <tr class="${user.Nguồn === 'Website' ? 'highlight-website' : 'highlight-admin'}">
                <td class="p-2 border">${user.Timestamp}</td>
                <td class="p-2 border">${user.Username}</td>
                <td class="p-2 border">${user.Email}</td>
                <td class="p-2 border">${user.Rank}</td>
                <td class="p-2 border">${user.Nguồn}</td>
            </tr>
        `).join('');
    }
    
    // Tải dữ liệu khi trang được mở
    document.addEventListener('DOMContentLoaded', loadUsers);
    </script>
</body>
</html>
